require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"api":[function(require,module,exports){
var apiConfig = {"jquery":"$","isSuccess":{"status":true},"ignoreResponse":false,"context":"window","timeout":5000,"success":["data"],"fail":["error"],"outputFile":""},
    $ = $,
    ajaxStatus = {};

/**
 * @param {String} config.need
 * @param {Object} config.target
 * @param {String} [config.value]
 * @param {Promise} config.promise
 */
function checkParam(config) {
    var value = $.trim(config.target[config.need]);

    if (config.value && value !== config.value) {
        return false;
    }
    if (!config.value && value === '') {
        config.promise.reject('Request failed: Missing parameters ' + config.need);
        return false;
    }
    config.target[config.need] = value;

    return true;
}

/**
 * @param {Object} config.need
 * @param {Object} config.target
 * @param {Promise} config.promise
 */
function checkParams(config) {
    for (var key in config.need) {
        if (!config.need.hasOwnProperty(key)) continue;
        if (!checkParam({
            need: key,
            target: config.target,
            promise: config.promise,
            value: config.need[key]
        })) {
            return false;
        }
    }

    return true;
}

function getParams(target, params) {
    var result = {},
        len = params.length;

    while (len--) {
        if (target[params[len]] === undefined && !apiConfig.ignoreResponse) {
            return false;
        }
        result[params[len]] = target[params[len]];
    }

    return result;
}

/**
 * @param {String} config.name
 * @param {Object} config.url
 * @param {Object} config.data
 * @param {String} config.type
 * @param {Object} config.context
 * @param {Number} config.timeout
 * @param {Promise} config.promise
 * @param {Array} config.successParam
 * @param {Array} config.failParam
 */
function doAjax(config) {
    ajaxStatus[config.name] = true;
    $.ajax({
        cache: false,
        data: config.data,
        dataType: 'json',
        type: config.type,
        context: config.context,
        url: config.url,
        timeout: config.timeout,
        success: function (res, status, xhr) {
            var result, params, cb;

            if (checkParams(apiConfig.isSuccess, res)) {
                params = config.successParam;
                cb = config.promise.resolve;
            } else {
                params = config.failParam;
                cb = config.promise.reject;
            }

            result = getParams(params, res);
            if (result === false) {
                throw new Error('Request faild: No enough expectation parameters in response');
            }

            cb(result);
        },
        error: function () {
            config.promise.reject('Request failed: Network instability or server busy');
        },
        complete: function () {
            delete ajaxStatus[config.name];
        }
    });
}            exports.loginAdmin = function (data) {                if (ajaxStatus[loginAdmin]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "name",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "pwd",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "loginAdmin",                    url: "admin_api/login",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.logoutAdmin = function (data) {                if (ajaxStatus[logoutAdmin]) return false;                var promise = $.Deferred,                    isPass = true;                                if (!isPass) return promise;                doAjax({                    name: "logoutAdmin",                    url: "admin_api/logout",                    data: data || {},                    type: "get",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.createAdmin = function (data) {                if (ajaxStatus[createAdmin]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "name",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "nickname",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "pwd",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "createAdmin",                    url: "admin_api/create",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.editAdmin = function (data) {                if (ajaxStatus[editAdmin]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "nickname",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "editAdmin",                    url: "admin_api/edit",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.removeAdmin = function (data) {                if (ajaxStatus[removeAdmin]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "name",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "removeAdmin",                    url: "admin_api/remove",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.loginUser = function (data) {                if (ajaxStatus[loginUser]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "name",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "pwd",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "loginUser",                    url: "user_api/login",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.logoutUser = function (data) {                if (ajaxStatus[logoutUser]) return false;                var promise = $.Deferred,                    isPass = true;                                if (!isPass) return promise;                doAjax({                    name: "logoutUser",                    url: "user_api/logout",                    data: data || {},                    type: "get",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.createUser = function (data) {                if (ajaxStatus[createUser]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "email",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "nickname",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "pwd",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "createUser",                    url: "user_api/create",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.editUser = function (data) {                if (ajaxStatus[editUser]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "nickname",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "editUser",                    url: "user_api/edits",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.removeUser = function (data) {                if (ajaxStatus[removeUser]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "name",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "removeUser",                    url: "user_api/remove",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.createProblem = function (data) {                if (ajaxStatus[createProblem]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "title",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "detail",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "tags",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "code",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "createProblem",                    url: "problem_api/create",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.createDetail = function (data) {                if (ajaxStatus[createDetail]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "problem_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "content",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "code",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "type",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "createDetail",                    url: "problem_api/create_detail",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.createComment = function (data) {                if (ajaxStatus[createComment]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "problem_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "content",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "createComment",                    url: "problem_api/create_comment",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.requestProblem = function (data) {                if (ajaxStatus[requestProblem]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "problem_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "requestProblem",                    url: "problem_api/request_problem",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.closeProblem = function (data) {                if (ajaxStatus[closeProblem]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "problem_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "closeProblem",                    url: "problem_api/close_problem",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.followProblem = function (data) {                if (ajaxStatus[followProblem]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "problem_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "followProblem",                    url: "problem_api/follow_problem",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.unfollowProblem = function (data) {                if (ajaxStatus[unfollowProblem]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "problem_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "unfollowProblem",                    url: "problem_api/unfollow_problem",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.collectProblem = function (data) {                if (ajaxStatus[collectProblem]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "problem_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "collectProblem",                    url: "problem_api/collect_problem",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.uncollectProblem = function (data) {                if (ajaxStatus[uncollectProblem]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "problem_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "uncollectProblem",                    url: "problem_api/uncollect_problem",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.upProblem = function (data) {                if (ajaxStatus[upProblem]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "problem_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "upProblem",                    url: "problem_api/up_problem",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.downProblem = function (data) {                if (ajaxStatus[downProblem]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "problem_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "downProblem",                    url: "problem_api/down_problem",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.createCourse = function (data) {                if (ajaxStatus[createCourse]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "title",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "type",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "video",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "description",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "createCourse",                    url: "course_api/create",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.removeCourse = function (data) {                if (ajaxStatus[removeCourse]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "course_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "removeCourse",                    url: "course_api/remove",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.editCourse = function (data) {                if (ajaxStatus[editCourse]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "course_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "title",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "type",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "video",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "description",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "editCourse",                    url: "course_api/edit",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.createChapter = function (data) {                if (ajaxStatus[createChapter]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "course_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "content",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "title",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "createChapter",                    url: "course_api/create_chapter",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.createStep = function (data) {                if (ajaxStatus[createStep]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "course_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "title",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "description",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "img",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "level",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "createStep",                    url: "course_api/create_step",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.editChapter = function (data) {                if (ajaxStatus[editChapter]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "chapter_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "content",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "title",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "editChapter",                    url: "course_api/edit_chapter",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };                    exports.editStep = function (data) {                if (ajaxStatus[editStep]) return false;                var promise = $.Deferred,                    isPass = true;                            if (checkParam({                need: "step_id",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "title",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "description",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "img",                target: data,                promise: promise            }) === false) {                isPass = false;            }                    if (checkParam({                need: "level",                target: data,                promise: promise            }) === false) {                isPass = false;            }                        if (!isPass) return promise;                doAjax({                    name: "editStep",                    url: "course_api/edit_step",                    data: data || {},                    type: "post",                    context: window,                    timeout: 5000,                    promise: promise,                    successParam: ["data"],                    failParam: ["error"]                });                return promise;            };        
},{}]},{},[]);
